from engine import *

# LHS of axiom CZ
czLHS = Circuit("cz-one-cnot")
CZorg1 = czLHS.gate("in", pos=(0,0), org=True)
CZorg2 = czLHS.gate("in", pos=(0,1), org=True)
CZh1 = czLHS.gate("H", pos=(1,1))
CZcx1 = czLHS.gate("CNOT", pos=(2,[0,1]))
CZh2 = czLHS.gate("H", pos=(3,1))
CZdst1 = czLHS.gate("out", pos=(4,0), dst=True)
CZdst2 = czLHS.gate("out", pos=(4,1), dst=True)
czLHS.connect(CZorg1, CZcx1, wiring=(0,0))
czLHS.connect(CZorg2, CZh1, wiring=(0,0))
czLHS.connect(CZcx1, CZdst1, wiring=(0,0))
czLHS.connect(CZh1, CZcx1, wiring=(0,1))
czLHS.connect(CZcx1, CZh2, wiring=(1,0))
czLHS.connect(CZh2, CZdst2, wiring=(0,0))

# Big circuit containing LHS of axiom CZ
circuit1 = Circuit("My circuit")
org1 = circuit1.gate("in", pos=(0,0), org=True)
org2 = circuit1.gate("in", pos=(0,1), org=True)
org3 = circuit1.gate("in", pos=(0,2), org=True)
org4 = circuit1.gate("in", pos=(0,3), org=True)
h1 = circuit1.gate("H", pos=(1,1))
a = circuit1.gate("A", arity=2, pos=(1,[2,3]))
h2 = circuit1.gate("H", pos=(2,2))
cx1 = circuit1.gate("CNOT", pos=(3,[1,2]))
h3 = circuit1.gate("H", pos=(4,2))
b = circuit1.gate("B", arity=2, pos=(4,[0,1]))
cx2 = circuit1.gate("CNOT", pos=(5,[1,2]))
dst1 = circuit1.gate("out", pos=(7,0), dst=True)
dst2 = circuit1.gate("out", pos=(7,1), dst=True)
dst3 = circuit1.gate("out", pos=(7,2), dst=True)
dst4 = circuit1.gate("out", pos=(7,3), dst=True)
h4 = circuit1.gate("H", pos=(6,2))
circuit1.connect(org1, b, wiring=(0,0))
circuit1.connect(org2, h1, wiring=(0,0))
circuit1.connect(org3, a, wiring=(0,0))
circuit1.connect(org4, a, wiring=(0,1))
circuit1.connect(a, h2, wiring=(0,0))
circuit1.connect(a, dst4, wiring=(1,0))
circuit1.connect(h1, cx1, wiring=(0,0))
circuit1.connect(h2, cx1, wiring=(0,1))
circuit1.connect(cx1, b, wiring=(0,1))
circuit1.connect(cx1, h3, wiring=(1,0))
circuit1.connect(b, dst1, wiring=(0,0))
circuit1.connect(b, cx2, wiring=(1,0))
circuit1.connect(h3, cx2, wiring=(0,1))
circuit1.connect(cx2, dst2, wiring=(0,0))
circuit1.connect(cx2, h4, wiring=(1,0))
circuit1.connect(h4, dst3, wiring=(0,0))

# Sub-circuit of circuit1
subcircuit1 = Circuit("My sub-circuit")
org1 = subcircuit1.gate("in", pos=(0,0), org=True)
org2 = subcircuit1.gate("in", pos=(0,1), org=True)
org3 = subcircuit1.gate("in", pos=(0,2), org=True)
h3 = subcircuit1.gate("H", pos=(1,2))
b = subcircuit1.gate("B", arity=2, pos=(1,[0,1]))
cx2 = subcircuit1.gate("CNOT", pos=(2,[1,2]))
dst1 = subcircuit1.gate("out", pos=(3,0), dst=True)
dst2 = subcircuit1.gate("out", pos=(3,1), dst=True)
dst3 = subcircuit1.gate("out", pos=(3,2), dst=True)
subcircuit1.connect(org1, b, wiring=(0,0))
subcircuit1.connect(org2, b, wiring=(0,1))
subcircuit1.connect(org3, h3, wiring=(0,0))
subcircuit1.connect(b, dst1, wiring=(0,0))
subcircuit1.connect(b, cx2, wiring=(1,0))
subcircuit1.connect(h3, cx2, wiring=(0,1))
subcircuit1.connect(cx2, dst2, wiring=(0,0))
subcircuit1.connect(cx2, dst3, wiring=(1,0))
